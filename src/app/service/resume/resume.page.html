<!-- service-request-summary.page.html -->
<ion-header class="ion-no-border">
  <ion-toolbar color="light">
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Résumé de la demande de service</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="summary-container">
    <!-- Service Type Card -->
    <div class="summary-card">
      <div class="service-type">
        <div class="service-image">
          <img src="assets/images/services/{{ serviceRequest.image }}" alt="Service image">
        </div>
        <div class="service-details">
          <h3>{{ serviceRequest.type }}</h3>
          <p>{{ serviceRequest.description }}</p>
          <div class="date-time">
            <ion-icon name="calendar-outline"></ion-icon>
            <span>{{ serviceRequest.date }} • {{ serviceRequest.time }}</span>
          </div>
        </div>
        <div class="price">
          {{ serviceRequest.price }} Ar/h
        </div>
      </div>
    </div>

    <!-- Plumber Card -->
    <div class="summary-card">
      <div class="plumber-info">
        <div class="plumber-image">
          <img [src]="serviceRequest.plumber.image" alt="Plumber">
        </div>
        <div class="plumber-details">
          <h3>Plombier</h3>
          <p>{{ serviceRequest.plumber.name }}</p>
        </div>
        <div class="rating">
          <ion-icon name="star"></ion-icon>
          <span>{{ serviceRequest.plumber.rating }}</span>
        </div>
      </div>
    </div>

    <!-- Address Card -->
    <div class="summary-card">
      <div class="address-info">
        <div class="icon-container">
          <ion-icon name="location-outline"></ion-icon>
        </div>
        <div class="address-details">
          <h3>Adresse</h3>
          <p>{{ serviceRequest.address }}</p>
        </div>
      </div>
    </div>

    <!-- Coupon Card -->
    <div class="summary-card">
      <div class="coupon-info">
        <div class="icon-container">
          <ion-icon name="pricetag-outline"></ion-icon>
        </div>
        <div class="coupon-details">
          <h3>Coupon</h3>
          <p *ngIf="serviceRequest.coupon">{{ serviceRequest.coupon }}</p>
          <p *ngIf="!serviceRequest.coupon" class="placeholder-text">Ajouter un coupon</p>
        </div>
        <div class="edit-icon" (click)="editCoupon()">
          <ion-icon name="create-outline"></ion-icon>
        </div>
      </div>
    </div>

    <!-- Payment Details Card -->
    <div class="summary-card">
      <div class="payment-info">
        <div class="icon-container">
          <ion-icon name="card-outline"></ion-icon>
        </div>
        <div class="payment-details">
          <h3>Détails de payment</h3>
          <p>{{ serviceRequest.payment.method }} № {{ serviceRequest.payment.details }}</p>
          <p class="payment-note">Votre payment sera effectué après le service fini</p>
        </div>
        <div class="edit-icon" (click)="editPayment()">
          <ion-icon name="create-outline"></ion-icon>
        </div>
      </div>
    </div>
  </div>

  <!-- Reserve Button -->
  <div class="reserve-button-container">
    <ion-button expand="block" (click)="confirmReservation()">
      <ion-icon name="document-text-outline" slot="start"></ion-icon>
      Réserver
    </ion-button>
  </div>
</ion-content>

<ion-footer>
  <app-tab-customer></app-tab-customer>
</ion-footer>
